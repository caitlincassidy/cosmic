<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Cosmic</title>

	<!-- Load style sheets -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.3.1/fullcalendar.min.css">
	<link rel="styleheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.3.1/fullcalendar.print.css">

	<link href="https://fonts.googleapis.com/css?family=Cairo|Gentium+Basic|Roboto" rel="stylesheet">

	<link rel="stylesheet" href="css/mainLayout.css">

	<!-- Use mobile-aware viewport -->
	<meta name="viewport" content=
	"width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Load any supplemental Javascript libraries here -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.3.1/fullcalendar.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

	<script>

		var new_event = function(date) {
			$('#event-info-form').get(0).reset();
			$('#new-event-modal').modal('toggle');
			$("#new_event_date").val(date.format());
			$("#new_event_start_time").val("13:00");
			$("#new_event_end_time").val("14:00");
		}

		var open_event = function(event) {
			$("#event-title").text(event.title);
			$("#event_type").text(event.eventType);
			$("#event_date").text(moment(event.start).format("MMM D, YYYY"));
			$("#event_start_time").text(moment(event.start).format("h:mm A"));
			$("#event_end_time").text(moment(event.end).format("h:mm A"));
			$('#event-modal').modal('toggle');
		}

		var lecture1 = {
			title: "Lecture 1",
			start: moment("04/12/2017 13:00").format(),
			end: moment("04/12/2017 14:00").format(),
			className: "lecture-event",
			eventType: "Lecture",
		}
		var lecture2 = {
			title: "Lecture 2",
			start: moment("04/14/2017 13:00").format(),
			end: moment("04/14/2017 14:00").format(),
			className: "lecture-event",
			eventType: "Lecture",
		}

		var quiz1 = {
			title: "Quiz 1",
			start: moment("04/28/2017 13:00").format(),
			end: moment("04/28/2017 14:00").format(),
			className: "quiz-event",
			eventType: "Quiz"
		}

		$(document).ready(function() {

  			// page is now ready, initialize the calendar...
  			$('#calendar').fullCalendar({
      			// put your options and callbacks here
      			weekends: false, // will hide Saturdays and Sundays
      			displayEventEnd: true,
      			dayClick: new_event,
      			eventClick: open_event,
      		});

  			$('#calendar').fullCalendar('renderEvent', lecture1);
  			$('#calendar').fullCalendar('renderEvent', lecture2);
  			$('#calendar').fullCalendar('renderEvent', quiz1);
  		});

		$(document).on('click', "#edit-event-btn", function(evt)
		{
			console.log('edit');
			$('#event-info-form').get(0).reset();
			$('#event-modal').modal('toggle');
			$('#new-event-modal').modal('toggle');
			$("#new_event_type").val($("#event_type").text());
			$("#new_event_name").val($("#event-title").text());
			$("#new_event_date").val(moment($("#event_date").text()).format("YYYY-MM-DD"));
			console.log(moment($("#event_start_time").text(), "h:mm A").format("HH:mm"));
			$("#new_event_start_time").val(moment($("#event_start_time").text(), "h:mm A").format("HH:mm"));
			$("#new_event_end_time").val(moment($("#event_end_time").text(), "h:mm A").format("HH:mm"));
		});

		$(document).on('click', "#create-event-btn", function(evt)
		{
			var start = moment($("#new_event_date").val()+" " +$("#new_event_start_time").val());
			var end = moment($("#new_event_date").val()+" " +$("#new_event_end_time").val());
			console.log($("#new_event_type").val());
			if (! $("#new_event_type").val()) {
				alert("Must choose an event type");
			} else if (! $("#new_event_name").val()) {
				alert("Must name event");
			} else if (end.isBefore(start)) {
				alert("Beginning time must be before ending time");
			} else {
				var event = {
					title: $("#new_event_name").val(),
					start: start.format(),
					end: end.format(),
					className: $("#new_event_type").val().toLowerCase() + "-event",
					eventType: $("#new_event_type").val(),
				}
				$('#calendar').fullCalendar('renderEvent', event);
				$('#new-event-modal').modal('toggle');
			}
		});

	</script>

</head>

<body>
	<div class="container-fluid">
		<div class="row main-header">
			<div class="col-lg-2"></div>
			<div class="col-lg-8">
				<h1> C&nbsp;O&nbsp;S&nbsp;M&nbsp;I&nbsp;C </h1>
			</div>
			<div class="col-lg-2">
				<div class="row">
					<a href="login.html">Logout</a>
				</div>
				<div class="row">
					<a href="settings.html">Settings</a>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-2" id="menubar">
			</div>
			<div class="col-lg-8">
				<!-- New event modal -->
				<div class="modal fade" id="new-event-modal" role="dialog">
					<div class="modal-dialog">
						<!-- Modal Content -->
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">&times;</button>
								<h3 class="modal-title">New Event</h3>
							</div>
							<div class="modal-body">
								<form id="event-info-form">
									<div class="row">
										<label for="new_event_type" class="col-xs-3 col-form-label"><b>Type:</b></label>
										<div class="col-xs-9">
											<select class="form-control" id="new_event_type">
												<option value="" selected>Event Type</option>
												<option value="Lecture">Lecture</option>
												<option value="Quiz">Quiz</option>
												<option value="Lab">Lab</option>
											</select>
										</div>
									</div>
									<div class="row">
										<label for="new_event_name" class="col-xs-3 col-form-label"><b>Name:</b></label>
										<div class="col-xs-9">
											<input class="form-control" type="text" value="" id="new_event_name">
										</div>
									</div>
									<div class="row">
										<label for="new_event_date" class="col-xs-3 col-form-label"><b>Date:</b></label>
										<div class="col-xs-9">
											<input class="form-control" type="date" value="" id="new_event_date">
										</div>
									</div>
									<div class="row">
										<label for="new_event_start_time" class="col-xs-3 col-form-label"><b>Start Time:</b></label>
										<div class="col-xs-9">
											<input class="form-control" type="time" value="" id="new_event_start_time">
										</div>
									</div>
									<div class="row">
										<label for="new_event_end_time" class="col-xs-3 col-form-label"><b>End Time:</b></label>
										<div class="col-xs-9">
											<input class="form-control" type="time" value="" id="new_event_end_time">
										</div>
									</div>
								</form>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
								<button id="create-event-btn" type="button" class="btn btn-primary">Create</button>
							</div>
						</div>
					</div>
				</div>
				<!-- Event info modal -->
				<div class="modal fade" id="event-modal" role="dialog">
					<div class="modal-dialog">
						<!-- Modal Content -->
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">&times;</button>
								<h3 class="modal-title" id="event-title"></h3>
							</div>
							<div class="modal-body">
								<div class="row">
									<label for="event_type" class="col-xs-3 col-form-label"><b>Type:</b></label>
									<div class="col-xs-9">
										<span id="event_type"></span>
									</div>
								</div>
								<div class="row">
									<label for="event_date" class="col-xs-3 col-form-label"><b>Date:</b></label>
									<div class="col-xs-9">
										<span id="event_date"></span>
									</div>
								</div>
								<div class="row">
									<label for="event_start_time" class="col-xs-3 col-form-label"><b>Start Time:</b></label>
									<div class="col-xs-9">
										<span id="event_start_time"></span>
									</div>
								</div>
								<div class="row">
									<label for="event_end_time" class="col-xs-3 col-form-label"><b>End Time:</b></label>
									<div class="col-xs-9">
										<span id="event_end_time"></span>
									</div>
								</div>

							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
								<button id="edit-event-btn" type="button" class="btn btn-primary">Edit</button>
							</div>
						</div>
					</div>
				</div>
				<div id='calendar'></div>
			</div>
			<div class="col-lg-2">
			</div>
		</div> <!-- class="row" -->
	</div> <!-- class="container" -->

	<script id="load-menubar-script" src="js/load-menubar.js" link="index.html"></script>
</body>

</html>